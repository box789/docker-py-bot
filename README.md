# Docker –¥–ª—è —Å–∞–º—ã—Ö –º–∞–ª–µ–Ω—å–∫–∏—Ö: —É–ø–∞–∫–æ–≤—ã–≤–∞–µ–º Python-–±–æ—Ç–∞ –∑–∞ 10 –º–∏–Ω—É—Ç

[–∏—Å—Ç–æ—á–Ω–∏–∫](https://habr.com/ru/articles/967948/)

–í–≤–µ–¥–µ–Ω–∏–µ: –ó–∞—á–µ–º –Ω–∞–º —ç—Ç–æ –Ω—É–∂–Ω–æ?
–ü—Ä–∏–≤–µ—Ç, –•–∞–±—Ä! üëã

–î–∞–≤–∞–π—Ç–µ —Å–º–æ–¥–µ–ª–∏—Ä—É–µ–º —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –∑–Ω–∞–∫–æ–º–∞ –∫–∞–∂–¥–æ–º—É –Ω–∞—á–∏–Ω–∞—é—â–µ–º—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É (–∏ –º–Ω–µ —Ç–æ–∂–µ).

–í—ã –Ω–∞–ø–∏—Å–∞–ª–∏ —Å–≤–æ–µ–≥–æ –ø–µ—Ä–≤–æ–≥–æ –∏–ª–∏ –¥–µ—Å—è—Ç–æ–≥–æ Telegram-–±–æ—Ç–∞. –£ –≤–∞—Å –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ: –≤—ã –∂–º–µ—Ç–µ –∑–µ–ª–µ–Ω—É—é –∫–Ω–æ–ø–∫—É Run –≤ PyCharm –∏–ª–∏ VS Code, –±–æ—Ç –æ–∂–∏–≤–∞–µ—Ç, –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Ä–∞–¥—É–µ—Ç –≥–ª–∞–∑. –í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è —Ö–∞–∫–µ—Ä–æ–º.

–ù–æ –ø–æ—Ç–æ–º –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞: –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω –≤–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä –∏ –∑–∞–ø—É—â–µ–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞. –°—Ç–æ–∏—Ç –∑–∞–∫—Ä—ã—Ç—å –Ω–æ—É—Ç–±—É–∫ –∏–ª–∏ —Å–ª—É—á–∞–π–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª ‚Äî –∏ –±–æ—Ç ¬´—É–º–∏—Ä–∞–µ—Ç¬ª, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–∏—à–∏–Ω—É.

–í—ã —Ä–µ—à–∞–µ—Ç–µ –ø–æ–π—Ç–∏ –¥–∞–ª—å—à–µ: –ø–æ–∫—É–ø–∞–µ—Ç–µ —Å–∞–º—ã–π –¥–µ—à–µ–≤—ã–π VPS-—Å–µ—Ä–≤–µ—Ä –∑–∞ 100 —Ä—É–±–ª–µ–π, —á—Ç–æ–±—ã –±–æ—Ç –∂–∏–ª —Ç–∞–º –≤–µ—á–Ω–æ. –ò —Ç—É—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∞–¥ —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ—Ç Python –∏–ª–∏ —Å—Ç–æ–∏—Ç –∫–∞–∫–∞—è-—Ç–æ –¥—Ä–µ–≤–Ω—è—è –≤–µ—Ä—Å–∏—è 3.6.

–í—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –Ω–æ –≤—ã–ª–µ–∑–∞—é—Ç –æ—à–∏–±–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Linux.

–í—ã –∑–∞–±—ã–ª–∏, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏ –ø–æ–ª–≥–æ–¥–∞ –Ω–∞–∑–∞–¥, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –≤–µ–ª–∏ requirements.txt.

–í –∏—Ç–æ–≥–µ –≤—ã —Ç—Ä–∞—Ç–∏—Ç–µ 3 —á–∞—Å–∞ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å –∫–æ–¥.

–ê —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å.

–ß—Ç–æ —Ç–∞–∫–æ–µ Docker (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏)?

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤–∞—à –∫–æ–¥ ‚Äî —ç—Ç–æ –¥–æ–º–∞—à–Ω–∏–π –æ–±–µ–¥.
–ß—Ç–æ–±—ã –ø–æ–æ–±–µ–¥–∞—Ç—å –≤ –≥–æ—Å—Ç—è—Ö (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ), –≤–∞–º –æ–±—ã—á–Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –∫ –Ω–∏–º –Ω–∞ –∫—É—Ö–Ω—é, –∏—Å–∫–∞—Ç—å –∫–∞—Å—Ç—Ä—é–ª–∏, –Ω–∞–¥–µ—è—Ç—å—Å—è, —á—Ç–æ —É –Ω–∏—Ö –µ—Å—Ç—å –ø–ª–∏—Ç–∞ –∏ –Ω—É–∂–Ω—ã–µ —Å–ø–µ—Ü–∏–∏. –ï—Å–ª–∏ –ø–ª–∏—Ç—ã –Ω–µ—Ç ‚Äî –≤—ã –≥–æ–ª–æ–¥–∞–µ—Ç–µ (–∫–æ–¥ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π).

Docker ‚Äî —ç—Ç–æ –≤–∞—à –ª–∞–Ω—á–±–æ–∫—Å (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä).
–í—ã –∫–ª–∞–¥–µ—Ç–µ —Ç—É–¥–∞ –Ω–µ —Ç–æ–ª—å–∫–æ –µ–¥—É (–≤–∞—à –∫–æ–¥), –Ω–æ –∏ —Å—Ä–∞–∑—É —Å–≤–æ—é –≤–∏–ª–∫—É, –ª—é–±–∏–º—É—é –ø—Ä–∏–ø—Ä–∞–≤—É –∏ –¥–∞–∂–µ –º–∞–ª–µ–Ω—å–∫—É—é –º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫—É. –¢–µ–ø–µ—Ä—å –Ω–µ–≤–∞–∂–Ω–æ, –∫—É–¥–∞ –≤—ã –ø—Ä–∏—à–ª–∏: –Ω–∞ –ø—É—Å—Ç–æ–π —Å–µ—Ä–≤–µ—Ä, –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä –¥—Ä—É–≥–∞ –∏–ª–∏ –Ω–∞ –º–æ—â–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä. –í—ã –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ —É –≤–∞—Å –¥–æ–º–∞.

–ß—Ç–æ –º—ã —Å–¥–µ–ª–∞–µ–º —Å–µ–≥–æ–¥–Ω—è?
–ú—ã –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ–º –∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–æ–≤ ¬´–Ω–∞ –∫–æ–ª–µ–Ω–∫–µ¬ª. –ó–∞ 10 –º–∏–Ω—É—Ç –º—ã:

–ü–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø—Ä–æ–µ–∫—Ç –ø–æ –≤—Å–µ–º –ø—Ä–∞–≤–∏–ª–∞–º.

–ù–∞–ø–∏—à–µ–º –ø—Ä–æ—Å—Ç—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é (Dockerfile) –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏ –±–æ—Ç–∞.

–ó–∞–ø—É—Å—Ç–∏–º –µ–≥–æ –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ.

–ü–æ–µ—Ö–∞–ª–∏!

2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Pre-flight check)
–ü—Ä–µ–∂–¥–µ —á–µ–º —É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞, –¥–∞–≤–∞–π—Ç–µ —É–±–µ–¥–∏–º—Å—è, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ —É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å, –∏ –ø—Ä–æ–µ–∫—Ç –≤—ã–≥–ª—è–¥–∏—Ç –æ–ø—Ä—è—Ç–Ω–æ. Docker –ª—é–±–∏—Ç –ø–æ—Ä—è–¥–æ–∫.

1. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥ –±–æ—Ç–∞
–î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –≤–æ–∑—å–º–µ–º –ø—Ä–æ—Å—Ç–µ–π—à–µ–≥–æ –±–æ—Ç–∞ –Ω–∞ aiogram 3.x. –ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Å–≤–æ–π —Å–ª–æ–∂–Ω—ã–π –ø—Ä–æ–µ–∫—Ç ‚Äî –æ—Ç–ª–∏—á–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª bot.py –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç—É–¥–∞ —ç—Ç–æ—Ç –∫–æ–¥:

import asyncio
import logging
import os
from aiogram import Bot, Dispatcher, types
from aiogram.filters import CommandStart

## –í–∫–ª—é—á–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

logging.basicConfig(level=logging.INFO)

# –í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç: –º—ã –ù–ï –ø–∏—à–µ–º —Ç–æ–∫–µ–Ω –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ.
# –ú—ã –±—É–¥–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–≥–æ "—Å–Ω–∞—Ä—É–∂–∏", –∫–æ–≥–¥–∞ –∑–∞–ø—É—Å—Ç–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
# –≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚Ññ1.
TOKEN = os.getenv("BOT_TOKEN")

dp = Dispatcher()

@dp.message(CommandStart())
async def cmd_start(message: types.Message):
    await message.answer("–ü—Ä–∏–≤–µ—Ç! –Ø —Ä–∞–±–æ—Ç–∞—é –≤–Ω—É—Ç—Ä–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞! üê≥")

@dp.message()
async def echo_handler(message: types.Message):
    await message.answer(f"–¢—ã –Ω–∞–ø–∏—Å–∞–ª: {message.text}")

async def main():
    if not TOKEN:
        print("–û—à–∏–±–∫–∞: –¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω!")
        return
    bot = Bot(token=TOKEN)
    await dp.start_polling(bot)

if __name__ == "__main__":
    try:
        asyncio.run(main())
    except KeyboardInterrupt:
        print("–ë–æ—Ç –≤—ã–∫–ª—é—á–µ–Ω")
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º os.getenv("BOT_TOKEN"). –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –±–æ—Ç –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å —Ç–æ–∫–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–≤–æ–µ–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. –ü–æ–∑–∂–µ –º—ã –ø–µ—Ä–µ–¥–∞–¥–∏–º —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –ø—Ä—è–º–æ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –î–æ–∫–µ—Ä–∞.

2. –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (requirements.txt)
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ Docker ‚Äî —ç—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ —á–∏—Å—Ç—ã–π –ª–∏—Å—Ç. –¢–∞–º –Ω–µ—Ç –Ω–∏ aiogram, –Ω–∏ –¥—Ä—É–≥–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏. –ï–º—É –Ω—É–∂–Ω–∞ –∫–∞—Ä—Ç–∞ –ø–æ–∫—É–ø–æ–∫ ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–æ–≥–æ, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å, —á—Ç–æ–±—ã –≤–∞—à –∫–æ–¥ –∑–∞—Ä–∞–±–æ—Ç–∞–ª.

–í Python —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–Ω—è—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª–µ requirements.txt.

–ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (venv), –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

pip freeze > requirements.txt
–û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª. –û–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

aiogram==3.x.x
aiohttp==3.x.x
...–¥—Ä—É–≥–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏...
‚ö†Ô∏è –°–æ–≤–µ—Ç: –ï—Å–ª–∏ –≤—ã –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —Å—Ç–∞–≤–∏—Ç–µ –≤—Å—ë –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π Python (—á—Ç–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è), –∫–æ–º–∞–Ω–¥–∞ pip freeze –≤—ã–≥—Ä—É–∑–∏—Ç –≤—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –≤–∫–ª—é—á–∞—è —Ç–µ, —á—Ç–æ –Ω–µ –Ω—É–∂–Ω—ã –±–æ—Ç—É. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –ª—É—á—à–µ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª requirements.txt –≤—Ä—É—á–Ω—É—é –∏ –≤–ø–∏—Å–∞—Ç—å —Ç—É–¥–∞ —Ç–æ–ª—å–∫–æ aiogram.

3. –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–í –∏—Ç–æ–≥–µ –≤–∞—à–∞ –ø–∞–ø–∫–∞ —Å –ø—Ä–æ–µ–∫—Ç–æ–º –¥–æ–ª–∂–Ω–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

my_docker_bot/
‚îú‚îÄ‚îÄ bot.py              # –ù–∞—à –∫–æ–¥
‚îî‚îÄ‚îÄ requirements.txt    # –°–ø–∏—Å–æ–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫
3. –ü–∏—à–µ–º Dockerfile (–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Å–±–æ—Ä–∫–∏)
–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é. –í –Ω—ë–º –º—ã –æ–±—ä—è—Å–Ω–∏–º –î–æ–∫–µ—Ä—É: ¬´–í–æ–∑—å–º–∏ Python, –ø–æ–ª–æ–∂–∏ —Ç—É–¥–∞ –º–æ–∏ —Ñ–∞–π–ª—ã, —Å–∫–∞—á–∞–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –ø—Ä–∏–≥–æ—Ç–æ–≤—å—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å¬ª.

–ü—Ä—è–º–æ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º Dockerfile.
‚ö†Ô∏è –í–∞–∂–Ω–æ: –ò–º–µ–Ω–Ω–æ —Ç–∞–∫, —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã –∏ –±–µ–∑ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (.txt, .py –Ω–µ –Ω—É–∂–Ω—ã).

–î–∞–≤–∞–π—Ç–µ –Ω–∞–ø–∏—à–µ–º –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —à–∞–≥ –∑–∞ —à–∞–≥–æ–º, —Ä–∞–∑–±–∏—Ä–∞—è –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ—á–∫—É.

–®–∞–≥ 1. –í—ã–±–∏—Ä–∞–µ–º –±–∞–∑—É (FROM)
–° —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞ –ø–∏—Å–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–æ–ª–≥–æ. –ü–æ—ç—Ç–æ–º—É –º—ã –±–µ—Ä–µ–º –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑, –≥–¥–µ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Linux –∏ Python.

FROM python:3.11-slim
FROM ‚Äî –Ω–∞—á–∞–ª–æ –ª—é–±–æ–≥–æ Dockerfile.

python:3.11 ‚Äî –≤–µ—Ä—Å–∏—è —è–∑—ã–∫–∞.

-slim ‚Äî —ç—Ç–æ –æ–±–ª–µ–≥—á–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –æ–±—Ä–∞–∑–∞. –í –Ω–µ–π –≤—ã—Ä–µ–∑–∞–Ω–æ –≤—Å—ë –ª–∏—à–Ω–µ–µ, —á—Ç–æ–±—ã –≤–∞—à –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–µ—Å–∏–ª –Ω–µ 1 –ì–ë, –∞ 100-200 –ú–ë. –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –±–æ—Ç–æ–≤ ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä.

–®–∞–≥ 2. –†–∞–±–æ—á–∞—è –ø–∞–ø–∫–∞ (WORKDIR)
–ù–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –≥–¥–µ –±—É–¥–µ—Ç –∂–∏—Ç—å –Ω–∞—à –±–æ—Ç.

WORKDIR /app
–≠—Ç–æ –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∞ cd /app –∏–ª–∏ ¬´–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–∞–ø–∫—É¬ª. –¢–µ–ø–µ—Ä—å –≤—Å–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π –ø–∞–ø–∫–∏ /app. –≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑–±—Ä–∞—Å—ã–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ –∫–æ—Ä–Ω—é —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–®–∞–≥ 3. –ö–æ–ø–∏—Ä—É–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏—Ö
–¢—É—Ç –µ—Å—Ç—å —Ö–∏—Ç—Ä–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä—É—é –æ—Ç–ª–∏—á–∞–µ—Ç –Ω–æ–≤–∏—á–∫–∞ –æ—Ç –ø—Ä–æ—Ñ–∏.
–ú—ã –º–æ–≥–ª–∏ –±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É –≤—Å—ë. –ù–æ Docker —É–º–Ω—ã–π: –æ–Ω –∫—ç—à–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π —à–∞–≥.

–ï—Å–ª–∏ –º—ã —Å–Ω–∞—á–∞–ª–∞ —Å–∫–æ–ø–∏—Ä—É–µ–º requirements.txt –∏ —É—Å—Ç–∞–Ω–æ–≤–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ç–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ø—Ä–∞–≤–∏–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è) –î–æ–∫–µ—Ä –Ω–µ –±—É–¥–µ—Ç –∑–∞–Ω–æ–≤–æ –∫–∞—á–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ—Ç —à–∞–≥ –Ω–µ –º–µ–Ω—è–ª—Å—è. –≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Å–±–æ—Ä–∫—É –≤ —Ä–∞–∑—ã.

COPY requirements.txt requirements.txt
RUN pip install --no-cache-dir -r requirements.txt
COPY ‚Äî –±–µ—Ä–µ–º —Ñ–∞–π–ª requirements.txt —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∏ –∫–ª–∞–¥–µ–º –µ–≥–æ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

RUN ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

--no-cache-dir ‚Äî –ø—Ä–æ—Å–∏–º pip –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫—ç—à —Å–∫–∞—á–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–º—ã –∂–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –Ω–∞–º –Ω—É–∂–Ω–æ —ç–∫–æ–Ω–æ–º–∏—Ç—å –º–µ—Å—Ç–æ).

–®–∞–≥ 4. –ö–æ–ø–∏—Ä—É–µ–º –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –∑–∞–∫–∏–¥—ã–≤–∞–µ–º —Å–∞–º –∫–æ–¥ –±–æ—Ç–∞.

COPY . .
–ü–µ—Ä–≤–∞—è —Ç–æ—á–∫–∞ . ‚Äî ¬´–≤—Å—ë –∏–∑ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–∏ –Ω–∞ –º–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ¬ª.

–í—Ç–æ—Ä–∞—è —Ç–æ—á–∫–∞ . ‚Äî ¬´–≤ —Ç–µ–∫—É—â—É—é —Ä–∞–±–æ—á—É—é –ø–∞–ø–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (/app)¬ª.

–®–∞–≥ 5. –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ (CMD)
–§–∏–Ω–∞–ª—å–Ω—ã–π –∞–∫–∫–æ—Ä–¥. –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É, –∫–æ–≥–¥–∞ –æ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è?

CMD ["python", "bot.py"]
–ú—ã –≥–æ–≤–æ—Ä–∏–º: –∑–∞–ø—É—Å—Ç–∏ Python –∏ –≤—ã–ø–æ–ª–Ω–∏ —Ñ–∞–π–ª bot.py.

–ü–æ—á–µ–º—É –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö? –≠—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –Ω—é–∞–Ω—Å (exec format), –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–æ–º–Ω–∏—Ç–µ: —Ç–∞–∫ –Ω–∞–¥–µ–∂–Ω–µ–µ, —á—Ç–æ–±—ã –±–æ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª –Ω–∞ –∫–æ–º–∞–Ω–¥—É ¬´–°—Ç–æ–ø¬ª.

–ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–í–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –≤–∞—à –ø–æ–ª–Ω—ã–π Dockerfile. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ –∫ —Å–µ–±–µ:

# 1. –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑
FROM python:3.11-slim

# 2. –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
WORKDIR /app

# 3. –ö–æ–ø–∏—Ä—É–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å—Ç–∞–≤–∏–º –∏—Ö (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–µ–≤!)
COPY requirements.txt requirements.txt
RUN pip install --no-cache-dir -r requirements.txt

# 4. –ö–æ–ø–∏—Ä—É–µ–º —Å–∞–º –∫–æ–¥
COPY . .

# 5. –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞
CMD ["python", "bot.py"]
4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ .dockerignore (–ü—Ä–∞–≤–∏–ª–∞ —Ö–æ—Ä–æ—à–µ–≥–æ —Ç–æ–Ω–∞)
–ú—ã –ø–æ—á—Ç–∏ –≥–æ—Ç–æ–≤—ã –∫ –∑–∞–ø—É—Å–∫—É. –ù–æ –ø–µ—Ä–µ–¥ —ç—Ç–∏–º –Ω—É–∂–Ω–æ –æ–±—Å—É–¥–∏—Ç—å –æ–¥–Ω—É –¥–µ—Ç–∞–ª—å, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–ª–∏—á–∞–µ—Ç ¬´—Ç—è–ø-–ª—è–ø¬ª —Å–±–æ—Ä–∫—É –æ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π.

–ü–æ–º–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É COPY . . –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ —à–∞–≥–∞? –û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—ã–ª–µ—Å–æ—Å: –∑–∞—Å–∞—Å—ã–≤–∞–µ—Ç –≤—Å—ë –∏–∑ –≤–∞—à–µ–π –ø–∞–ø–∫–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –í–æ–æ–±—â–µ –≤—Å—ë.

–ü—Ä–æ–±–ª–µ–º–∞ ¬´–ú—É—Å–æ—Ä–∞¬ª
–ï—Å–ª–∏ —É –≤–∞—Å –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –µ—Å—Ç—å:

–ü–∞–ø–∫–∞ .git (–∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π) ‚Äî –æ–Ω–∞ –º–æ–∂–µ—Ç –≤–µ—Å–∏—Ç—å —Å–æ—Ç–Ω–∏ –º–µ–≥–∞–±–∞–π—Ç. –ó–∞—á–µ–º –æ–Ω–∞ –±–æ—Ç—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ? –ù–µ –Ω—É–∂–Ω–∞.

–ü–∞–ø–∫–∞ venv (–≤–∞—à–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ) ‚Äî —ç—Ç–æ —Å–∞–º–æ–µ —Å—Ç—Ä–∞—à–Ω–æ–µ.

–í–æ-–ø–µ—Ä–≤—ã—Ö, –æ–Ω–æ –≤–µ—Å–∏—Ç –º–Ω–æ–≥–æ.

–í–æ-–≤—Ç–æ—Ä—ã—Ö, –µ—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –Ω–∞ Windows, –∞ Docker —Å–æ–±–∏—Ä–∞–µ—Ç Linux-–æ–±—Ä–∞–∑, —Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–∞–ø–∫–∞ venv –ø—Ä–æ—Å—Ç–æ —Å–ª–æ–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ –û–°).

__pycache__ ‚Äî –±–∞–π—Ç-–∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–†–µ—à–µ–Ω–∏–µ: .dockerignore
–ß—Ç–æ–±—ã Docker –Ω–µ —Ç–∞—â–∏–ª —ç—Ç–æ—Ç –º—É—Å–æ—Ä —Å —Å–æ–±–æ–π, –º—ã —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª-—Ñ–∏–ª—å—Ç—Ä. –≠—Ç–æ —Ä–æ–¥–Ω–æ–π –±—Ä–∞—Ç —Ñ–∞–π–ª–∞ .gitignore.

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .dockerignore (—Å —Ç–æ—á–∫–æ–π –≤ –Ω–∞—á–∞–ª–µ!) –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç—É–¥–∞:

venv/
.venv/
.git/
__pycache__/
.idea/
.vscode/
*.pyc
.env
–ß—Ç–æ –º—ã —Å–¥–µ–ª–∞–ª–∏:

–ò—Å–∫–ª—é—á–∏–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (venv), –ø–æ—Ç–æ–º—É —á—Ç–æ Docker —Å–∞–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–≤–µ–∂–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

–£–±—Ä–∞–ª–∏ .git –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤ (.idea, .vscode), —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å –≤–µ—Å –æ–±—Ä–∞–∑–∞.

–î–æ–±–∞–≤–∏–ª–∏ .env (–µ—Å–ª–∏ –æ–Ω —É –≤–∞—Å –µ—Å—Ç—å). –ü–æ—á–µ–º—É? –ß–∏—Ç–∞–π—Ç–µ –Ω–∏–∂–µ.

–ü–∞—Ä–∞ —Å–ª–æ–≤ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–¢–æ–∫–µ–Ω—ã) üîê
–í—ã –∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ –º—ã –¥–æ–±–∞–≤–∏–ª–∏ .env –≤ –∏–≥–Ω–æ—Ä-–ª–∏—Å—Ç? –ò –≤ –∫–æ–¥–µ –±–æ—Ç–∞ (bot.py) –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ os.getenv("BOT_TOKEN")?

–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ.

–ù–∏–∫–æ–≥–¥–∞, —Å–ª—ã—à–∏—Ç–µ, –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ ¬´–∑–∞–ø–µ–∫–∞–π—Ç–µ¬ª —Å–≤–æ–∏ –ø–∞—Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã –≤–Ω—É—Ç—Ä—å Docker-–æ–±—Ä–∞–∑–∞.
–ï—Å–ª–∏ –≤—ã –Ω–∞–ø–∏—à–µ—Ç–µ —Ç–æ–∫–µ–Ω –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–µ—Ç–µ —Ñ–∞–π–ª .env –≤–Ω—É—Ç—Ä—å –æ–±—Ä–∞–∑–∞, —Ç–æ –ª—é–±–æ–π, –∫—Ç–æ –ø–æ–ª—É—á–∏—Ç –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–º—É –æ–±—Ä–∞–∑—É (–∏–ª–∏ –≤–∞—à–µ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é), —É–∫—Ä–∞–¥–µ—Ç –≤–∞—à–µ–≥–æ –±–æ—Ç–∞.

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

–ö–æ–¥ –∏ –û–±—Ä–∞–∑ ‚Äî —á–∏—Å—Ç—ã–µ (–±–µ–∑ –ø–∞—Ä–æ–ª–µ–π).

–¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –º–æ–º–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

5. –ú–∞–≥–∏—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ: –°–±–æ—Ä–∫–∞ –∏ –ó–∞–ø—É—Å–∫
–í—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ. –ü–æ—Ä–∞ –∑–∞–≤–æ–¥–∏—Ç—å –º–æ—Ç–æ—Ä! üèéÔ∏è

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª (–∏–ª–∏ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É) –≤ –ø–∞–ø–∫–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.
‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop (–∏–ª–∏ Docker Engine –Ω–∞ Linux) –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ï—Å–ª–∏ –∫–∏—Ç –≤ —Ç—Ä–µ–µ —Å–ø–∏—Ç ‚Äî —Ä–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ.

–≠—Ç–∞–ø 1. –°–±–æ—Ä–∫–∞ (Build)
–°–µ–π—á–∞—Å –º—ã –ø—Ä–µ–≤—Ä–∞—Ç–∏–º –Ω–∞—à –∫–æ–¥ –∏ Dockerfile –≤ –û–±—Ä–∞–∑ (Image).
–û–±—Ä–∞–∑ ‚Äî —ç—Ç–æ —Ç–æ—Ç —Å–∞–º—ã–π –∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–π ¬´–ª–∞–Ω—á–±–æ–∫—Å¬ª, –≥–æ—Ç–æ–≤—ã–π –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ.

–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

docker build -t my-telegram-bot .
(–ù–µ –∑–∞–±—É–¥—å—Ç–µ —Ç–æ—á–∫—É –≤ –∫–æ–Ω—Ü–µ! –û–Ω–∞ –æ—á–µ–Ω—å –≤–∞–∂–Ω–∞)

–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:

docker build: –ö–æ–º–∞–Ω–¥–∞ ¬´–°–æ–±–µ—Ä–∏¬ª.

-t my-telegram-bot: –§–ª–∞–≥ Tag (–∏–º—è). –ú—ã –Ω–∞–∑—ã–≤–∞–µ–º –Ω–∞—à –æ–±—Ä–∞–∑ my-telegram-bot, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º —É–¥–æ–±–Ω–æ –∫ –Ω–µ–º—É –æ–±—Ä–∞—â–∞—Ç—å—Å—è.

. (–¢–æ—á–∫–∞): –ì–æ–≤–æ—Ä–∏—Ç –î–æ–∫–µ—Ä—É: ¬´–ò—â–∏ Dockerfile –ø—Ä—è–º–æ –∑–¥–µ—Å—å, –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ¬ª.

–í—ã —É–≤–∏–¥–∏—Ç–µ, –∫–∞–∫ –ø–æ–±–µ–≥—É—Ç —Å—Ç—Ä–æ–∫–∏: —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ Python, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫. –í –ø–µ—Ä–≤—ã–π —Ä–∞–∑ —ç—Ç–æ –∑–∞–π–º–µ—Ç –º–∏–Ω—É—Ç—É-–¥–≤–µ. –ï—Å–ª–∏ —É–≤–∏–¥–µ–ª–∏ –≤ –∫–æ–Ω—Ü–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ FINISHED –∏–ª–∏ exporting layers ‚Äî –ø–æ–∑–¥—Ä–∞–≤–ª—è—é, —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!

–≠—Ç–∞–ø 2. –ó–∞–ø—É—Å–∫ (Run)
–û–±—Ä–∞–∑ –≥–æ—Ç–æ–≤. –ù–æ –ø–æ–∫–∞ –æ–Ω –ø—Ä–æ—Å—Ç–æ –ª–µ–∂–∏—Ç –Ω–∞ –¥–∏—Å–∫–µ. –î–∞–≤–∞–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏–º –∏–∑ –Ω–µ–≥–æ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä (—Ä–∞–±–æ—Ç–∞—é—â—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É).

–ü–æ–º–Ω–∏—Ç–µ, –º—ã –Ω–µ –≤—à–∏–ª–∏ —Ç–æ–∫–µ–Ω –≤ –∫–æ–¥? –°–µ–π—á–∞—Å –º—ã –ø–µ—Ä–µ–¥–∞–¥–∏–º –µ–≥–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ.

–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É (–∑–∞–º–µ–Ω–∏—Ç–µ –í–ê–®_–¢–û–ö–ï–ù –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –æ—Ç BotFather):

docker run -d --name my-running-bot -e BOT_TOKEN="12345:ABC-xyz..." my-telegram-bot
–ö–æ–º–∞–Ω–¥–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Å—Ç—Ä–∞—à–Ω–æ–≤–∞—Ç–æ, –Ω–æ –¥–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º –µ—ë –ø–æ –∫–æ—Å—Ç–æ—á–∫–∞–º:

docker run: ¬´–ó–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä¬ª.

-d (Detached): –°–∞–º—ã–π –≤–∞–∂–Ω—ã–π —Ñ–ª–∞–≥ –¥–ª—è –±–æ—Ç–æ–≤. –û–Ω –æ–∑–Ω–∞—á–∞–µ—Ç ¬´–ó–∞–ø—É—Å—Ç–∏—Å—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ¬ª.

–ë–µ–∑ —ç—Ç–æ–≥–æ —Ñ–ª–∞–≥–∞: –ë–æ—Ç –∑–∞—Ö–≤–∞—Ç–∏—Ç –≤–∞—à —Ç–µ—Ä–º–∏–Ω–∞–ª, –∏ –µ—Å–ª–∏ –≤—ã –µ–≥–æ –∑–∞–∫—Ä–æ–µ—Ç–µ ‚Äî –±–æ—Ç —É–º—Ä–µ—Ç.

–° —ç—Ç–∏–º —Ñ–ª–∞–≥–æ–º: –ë–æ—Ç —É–π–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å ¬´–ø–æ–¥ –∫–∞–ø–æ—Ç¬ª, –∞ —Ç–µ—Ä–º–∏–Ω–∞–ª –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–º.

--name my-running-bot: –ú—ã –¥–∞–µ–º –∏–º—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —ç—Ç–æ–º—É –∑–∞–ø—É—â–µ–Ω–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –ª–µ–≥–∫–æ –µ–≥–æ –Ω–∞–π—Ç–∏ –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.

-e BOT_TOKEN="...": Environment (–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è). –ú—ã ¬´–≤–ø—Ä—ã—Å–∫–∏–≤–∞–µ–º¬ª —Ç–æ–∫–µ–Ω –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –í –∫–æ–¥–µ os.getenv –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–º–µ–Ω–Ω–æ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ.

my-telegram-bot: –ò–º—è –æ–±—Ä–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å–æ–±—Ä–∞–ª–∏ –Ω–∞ –ø—Ä–æ—à–ª–æ–º —à–∞–≥–µ.

–≠—Ç–∞–ø 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
Docker –≤—ã–¥–∞–ª –≤–∞–º –¥–ª–∏–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä (ID –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) –∏ –∑–∞–º–æ–ª—á–∞–ª? –≠—Ç–æ —Ö–æ—Ä–æ—à–∏–π –∑–Ω–∞–∫!

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –±–æ—Ç. –í–≤–µ–¥–∏—Ç–µ:

docker ps
–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É. –ï—Å–ª–∏ –≤ –∫–æ–ª–æ–Ω–∫–µ STATUS –Ω–∞–ø–∏—Å–∞–Ω–æ Up ... seconds ‚Äî –ø–æ–±–µ–¥–∞! üéâ

–ò–¥–∏—Ç–µ –≤ –¢–µ–ª–µ–≥—Ä–∞–º –∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–µ–º—É –±–æ—Ç—É /start. –û–Ω –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å:

"–ü—Ä–∏–≤–µ—Ç! –Ø —Ä–∞–±–æ—Ç–∞—é –≤–Ω—É—Ç—Ä–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞! üê≥"

–ï—Å–ª–∏ –±–æ—Ç –æ—Ç–≤–µ—Ç–∏–ª ‚Äî –≤—ã –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –Ω–∞—É—á–∏–ª–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –î–æ–∫–µ—Ä–æ–º. –í–∞—à –±–æ—Ç —Ç–µ–ø–µ—Ä—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω, —É–ø–∞–∫–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã.

6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º (–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏)
–ò—Ç–∞–∫, –≤–∞—à –±–æ—Ç –∫—Ä—É—Ç–∏—Ç—Å—è –≥–¥–µ-—Ç–æ –≤ —Ñ–æ–Ω–µ (–≤ —Ä–µ–∂–∏–º–µ -d). –í—ã –Ω–µ –≤–∏–¥–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ —Å –ø—Ä–∏–≤—ã—á–Ω—ã–º–∏ –ø—Ä–∏–Ω—Ç–∞–º–∏. –í–æ–∑–Ω–∏–∫–∞–µ—Ç –≤–æ–ø—Ä–æ—Å: –∫–∞–∫ —Ç–µ–ø–µ—Ä—å —Å –Ω–∏–º –æ–±—â–∞—Ç—å—Å—è?

–í–æ—Ç 4 –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.

1. –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ (logs)
–ï—Å–ª–∏ –±–æ—Ç –≤–¥—Ä—É–≥ –ø–µ—Ä–µ—Å—Ç–∞–ª –æ—Ç–≤–µ—á–∞—Ç—å –∏–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å —Ç–µ —Å–∞–º—ã–µ print(), –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø–∏—Å–∞–ª–∏ –≤ –∫–æ–¥–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

docker logs my-running-bot
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–≤–µ–¥–µ—Ç –≤—Å—ë, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±–æ—Ç–∞ —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–ø—É—Å–∫–∞.

üöÄ Pro-tip: –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–∫–∞–∫ –≤ PyCharm), –¥–æ–±–∞–≤—å—Ç–µ —Ñ–ª–∞–≥ -f (follow):

docker logs -f my-running-bot
–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –≤—ã –Ω–∞–ø–∏—à–µ—Ç–µ –±–æ—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–µ, –≤—ã —Å—Ä–∞–∑—É —É–≤–∏–¥–∏—Ç–µ –ª–æ–≥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ. –ß—Ç–æ–±—ã –≤—ã–π—Ç–∏, –Ω–∞–∂–º–∏—Ç–µ Ctrl + C (—ç—Ç–æ –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –±–æ—Ç–∞, —Ç–æ–ª—å–∫–æ –æ—Ç–∫–ª—é—á–∏—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤).

2. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞ (stop)
–†–µ—à–∏–ª–∏ –≤—ã–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞, —á—Ç–æ–±—ã –æ–Ω –Ω–µ —Ç—Ä–∞—Ç–∏–ª —Ä–µ—Å—É—Ä—Å—ã –∏–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º?

docker stop my-running-bot
Docker –≤–µ–∂–ª–∏–≤–æ –ø–æ–ø—Ä–æ—Å–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è. –ë–æ—Ç —É—Å–Ω–µ—Ç. –í —Å–ø–∏—Å–∫–µ docker ps –µ–≥–æ –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç, –Ω–æ –æ–Ω –Ω–µ —É–¥–∞–ª–µ–Ω. –û–Ω –ø—Ä–æ—Å—Ç–æ –≤—ã–∫–ª—é—á–µ–Ω (–∫–∞–∫ –∫–æ–º–ø—å—é—Ç–µ—Ä).

–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –µ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ —Å —Ç–µ–º–∏ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:

docker start my-running-bot
3. –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (rm)
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–≤—Å–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –Ω–∞—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –µ–≥–æ –Ω–∞–∑–≤–∞–ª–∏), —Å–Ω–∞—á–∞–ª–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ, –∞ –ø–æ—Ç–æ–º —É–¥–∞–ª–∏—Ç–µ:

docker stop my-running-bot
docker rm my-running-bot
‚ö†Ô∏è –í–∞–∂–Ω–æ: –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ —É–¥–∞–ª—è–µ—Ç –≤–∞—à –∫–æ–¥ –∏–ª–∏ Docker-–æ–±—Ä–∞–∑. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.

4. –ì–ª–∞–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å: ¬´–Ø –æ–±–Ω–æ–≤–∏–ª –∫–æ–¥, –∫–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞?¬ª
–≠—Ç–æ —Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞ –Ω–æ–≤–∏—á–∫–æ–≤.
–ó–∞–ø–æ–º–Ω–∏—Ç–µ: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ –∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω–∞—è –ø–æ—Å—ã–ª–∫–∞. –ï—Å–ª–∏ –≤—ã –ø–æ–º–µ–Ω—è–ª–∏ –∫–æ–¥ –≤ —Ñ–∞–π–ª–µ bot.py —É —Å–µ–±—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è.

–ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞, –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è:

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (stop + rm).

–ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –∑–∞–Ω–æ–≤–æ (docker build ...), —á—Ç–æ–±—ã "–∑–∞–ø–µ—á—å" –Ω–æ–≤—ã–π –∫–æ–¥.

–ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (docker run ...).

–ó–≤—É—á–∏—Ç –¥–æ–ª–≥–æ? –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–æ —Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–≤–æ–¥—è—Ç—Å—è –∑–∞ 10 —Å–µ–∫—É–Ω–¥ (—Å—Ç—Ä–µ–ª–æ—á–∫–∞ –≤–≤–µ—Ä—Ö –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–ø–∞—Å–∞–µ—Ç).

7. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ ¬´–ß—Ç–æ –¥–∞–ª—å—à–µ?¬ª
–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! üéâ –í—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø–µ—Ä–µ—à–ª–∏ –∏–∑ –ª–∏–≥–∏ ¬´–∑–∞–ø—É—Å–∫–∞—é –∫–æ–¥ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ¬ª –≤ –ª–∏–≥—É ¬´—É–ø–∞–∫–æ–≤—ã–≤–∞—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–∞–∫ –ø—Ä–æ—Ñ–∏¬ª.

–ß—Ç–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤ –∏—Ç–æ–≥–µ?

–ò–∑–æ–ª—è—Ü–∏—è: –í–∞—à –±–æ—Ç –±–æ–ª—å—à–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ. –í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å Python —Å–æ —Å–≤–æ–µ–π –º–∞—à–∏–Ω—ã, –∞ –±–æ—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

–ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å: –í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å —ç—Ç–æ—Ç Docker-–æ–±—Ä–∞–∑ –¥—Ä—É–≥—É, –∏ –æ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —É –Ω–µ–≥–æ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞. –ë–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ —Ç–∞–Ω—Ü–µ–≤ —Å –±—É–±–Ω–æ–º.

–ß–∏—Å—Ç–æ—Ç–∞: –í—ã –Ω–µ –∑–∞—Å–æ—Ä—è–µ—Ç–µ —Å–≤–æ—é —Å–∏—Å—Ç–µ–º—É –¥–µ—Å—è—Ç–∫–∞–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

–ö—É–¥–∞ —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ?
–ö–æ–Ω–µ—á–Ω–æ, –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π docker run —Å –∫—É—á–µ–π —Ñ–ª–∞–≥–æ–≤ ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω–æ, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞. –í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, –≥–¥–µ –±–æ—Ç—É –Ω—É–∂–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, Redis), –≤—Å—ë —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ.

–í–æ—Ç —Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –∏–∑—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º–∏ (–∏–ª–∏ –∂–¥–∞—Ç—å –º–æ–∏—Ö –Ω–æ–≤—ã—Ö —Å—Ç–∞—Ç–µ–π üòâ):

Docker Compose: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–∏—Å–∞—Ç—å –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ docker-compose.yml. –ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö –¥–ª–∏–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏!

Volumes (–¢–æ–º–∞): –°–µ–π—á–∞—Å, –µ—Å–ª–∏ –≤—ã —É–¥–∞–ª–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –ø—Ä–æ–ø–∞–¥—É—Ç. Volumes –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑—É SQLite) –Ω–∞ –¥–∏—Å–∫–µ –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è.

Deploy: –ö–∞–∫ –∑–∞ 5 –º–∏–Ω—É—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –∞—Ä–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π VPS-—Å–µ—Ä–≤–µ—Ä.

üõ°Ô∏è –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ
–¢–µ–æ—Ä–∏—è –±–µ–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±—ã—Å—Ç—Ä–æ –∑–∞–±—ã–≤–∞–µ—Ç—Å—è. –ß—Ç–æ–±—ã –∑–∞–∫—Ä–µ–ø–∏—Ç—å —É—Å–ø–µ—Ö, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–∏ –∑–∞–¥–∞–Ω–∏—è:

Level Easy (–î–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏):
–í–æ–∑—å–º–∏—Ç–µ –ª—é–±–æ–π —Å–≤–æ–π —Å—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç (–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä, –ø–∞—Ä—Å–µ—Ä, –¥—Ä—É–≥–æ–π –±–æ—Ç) –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –¥–ª—è –Ω–µ–≥–æ Dockerfile. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç.

Level Medium (–î–ª—è –ª—é–±–æ–ø—ã—Ç–Ω—ã—Ö):
–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –≤ Dockerfile –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ —Å python:3.11-slim –Ω–∞ python:3.11-alpine.

–°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ (docker build ...).

–°—Ä–∞–≤–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –æ–±—Ä–∞–∑–æ–≤ –∫–æ–º–∞–Ω–¥–æ–π docker images. –ù–∞—Å–∫–æ–ª—å–∫–æ Alpine –º–µ–Ω—å—à–µ? (–°–ø–æ–π–ª–µ—Ä: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ, –Ω–æ —Å –Ω–∏–º –±—ã–≤–∞—é—Ç –Ω—é–∞–Ω—Å—ã –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–ª–æ–∂–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫).

Level Hard (–î–ª—è –±—É–¥—É—â–∏—Ö —Å–µ–Ω—å–æ—Ä–æ–≤):
–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞ —Ñ–ª–∞–≥ --restart always.

docker run -d --restart always ...
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞, –∞ –∑–∞—Ç–µ–º... —É–±–µ–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä (–µ—Å–ª–∏ Docker –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–µ). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –≤–æ—Å–∫—Ä–µ—Å–Ω–µ—Ç –ª–∏ –±–æ—Ç —Å–∞–º?
